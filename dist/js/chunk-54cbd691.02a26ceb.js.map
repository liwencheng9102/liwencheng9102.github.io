{"version":3,"sources":["webpack:///./src/views/Contacts.vue?9ecf","webpack:///./src/views/Contacts.vue?fe1c","webpack:///src/views/Contacts.vue","webpack:///./src/views/Contacts.vue?40a8","webpack:///./src/views/Contacts.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","on","showModal","attrs","_v","messages","length","_l","msg","index","key","from","closable","$event","handleAgree","handleDisagree","model","value","callback","$$v","visible","expression","_s","status","staticStyle","openKeys","handleClick","slot","ros","name","handleClickGroup","item","groupid","groupname","staticRenderFns","components","Header","Tabbar","data","current","computed","methods","$store","commit","e","$router","push","getGroupInfo","then","console","log","listGroupMember","initBetterScroll","wrapperScroll","refresh","click","agreeFriends","to","sendTextMeg","opt","disagreeFriends","mounted","getRoster","getGroup","beforeDestroy","destroy","component"],"mappings":"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","file":"js/chunk-54cbd691.02a26ceb.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Contacts.vue?vue&type=style&index=0&id=168785d6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Contacts.vue?vue&type=style&index=0&id=168785d6&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"contacts\"},[_c('Header'),_c('div',{ref:\"wrapper\",staticClass:\"wrapper\"},[_c('div',{staticClass:\"scrollItem\"},[_c('div',{staticClass:\"newFriend\",on:{\"click\":_vm.showModal}},[_c('span',[_c('a-icon',{staticClass:\"userAddIcon\",attrs:{\"type\":\"user-add\"}}),_c('p',[_vm._v(\"新朋友\")])],1),_c('a-icon',{staticClass:\"righticon\",attrs:{\"type\":\"right\"}}),_c('a-badge',{staticClass:\"righticon\",attrs:{\"count\":_vm.messages.length}}),_vm._l((_vm.messages),function(msg,index){return _c('a-modal',{key:index,attrs:{\"title\":msg.from,\"okText\":\"同意\",\"cancelText\":\"拒绝\",\"closable\":_vm.closable},on:{\"ok\":function($event){return _vm.handleAgree(msg.from)},\"cancel\":function($event){return _vm.handleDisagree(msg.from)}},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[_c('p',[_vm._v(_vm._s(msg.status))])])})],2),_c('a-menu',{staticStyle:{\"width\":\"100%\"},attrs:{\"defaultSelectedKeys\":['1'],\"openKeys\":_vm.openKeys,\"mode\":\"inline\"},on:{\"update:openKeys\":function($event){_vm.openKeys=$event},\"update:open-keys\":function($event){_vm.openKeys=$event}}},[_c('a-sub-menu',{key:\"sub1\",on:{\"click\":_vm.handleClick}},[_c('span',{staticClass:\"title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('a-icon',{attrs:{\"type\":\"user\"}}),_c('span',[_vm._v(\"我的好友\")])],1),_vm._l((_vm.roster),function(ros){return _c('a-menu-item',{key:ros.name},[_c('a-icon',{attrs:{\"type\":\"qq\"}}),_vm._v(\"\\n            \"+_vm._s(ros.name)+\"\\n          \")],1)})],2),_c('a-sub-menu',{key:\"sub2\",on:{\"click\":_vm.handleClickGroup}},[_c('span',{staticClass:\"title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('a-icon',{attrs:{\"type\":\"team\"}}),_c('span',[_vm._v(\"群组\")])],1),_vm._l((_vm.group),function(item){return _c('a-menu-item',{key:item.groupid},[_c('a-icon',{attrs:{\"type\":\"team\"}}),_vm._v(\"\\n            \"+_vm._s(item.groupname)+\"\\n          \")],1)})],2),_c('a-sub-menu',{key:\"sub3\"},[_c('span',{staticClass:\"title\",attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('a-icon',{attrs:{\"type\":\"eye-invisible\"}}),_c('span',[_vm._v(\"黑名单\")])],1),_c('a-menu-item',[_c('a-icon',{attrs:{\"type\":\"eye-invisible\"}}),_vm._v(\"黑名单1\\n          \")],1)],1)],1)],1)]),_c('Tabbar')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"contacts\">\n    <Header></Header>\n\n    <div class=\"wrapper\" ref=\"wrapper\">\n      <div class=\"scrollItem\">\n        <div class=\"newFriend\" @click=\"showModal\">\n          <span>\n            <a-icon type=\"user-add\" class=\"userAddIcon\" />\n            <p>新朋友</p>\n          </span>\n          <a-icon type=\"right\" class=\"righticon\" />\n          <a-badge :count=\"messages.length\" class=\"righticon\" />\n          <a-modal\n            :title=\"msg.from\"\n            v-model=\"visible\"\n            @ok=\"handleAgree(msg.from)\"\n            @cancel=\"handleDisagree(msg.from)\"\n            okText=\"同意\"\n            cancelText=\"拒绝\"\n            :closable=\"closable\"\n            v-for=\"(msg,index) in messages\"\n            :key=\"index\"\n          >\n            <p>{{msg.status}}</p>\n          </a-modal>\n        </div>\n\n        <a-menu\n          style=\"width: 100%\"\n          :defaultSelectedKeys=\"['1']\"\n          :openKeys.sync=\"openKeys\"\n          mode=\"inline\"\n        >\n          <a-sub-menu key=\"sub1\" @click=\"handleClick\">\n            <span slot=\"title\" class=\"title\">\n              <a-icon type=\"user\" />\n              <span>我的好友</span>\n            </span>\n            <a-menu-item :key=\"ros.name\" v-for=\"ros in roster\">\n              <a-icon type=\"qq\" />\n              {{ros.name}}\n            </a-menu-item>\n          </a-sub-menu>\n\n          <a-sub-menu key=\"sub2\" @click=\"handleClickGroup\">\n            <span slot=\"title\" class=\"title\">\n              <a-icon type=\"team\" />\n              <span>群组</span>\n            </span>\n            <a-menu-item v-for=\"item in group\" :key=\"item.groupid\">\n              <a-icon type=\"team\" />\n              {{item.groupname}}\n            </a-menu-item>\n          </a-sub-menu>\n\n          <a-sub-menu key=\"sub3\">\n            <span slot=\"title\" class=\"title\">\n              <a-icon type=\"eye-invisible\" />\n              <span>黑名单</span>\n            </span>\n            <a-menu-item>\n              <a-icon type=\"eye-invisible\" />黑名单1\n            </a-menu-item>\n          </a-sub-menu>\n        </a-menu>\n      </div>\n    </div>\n\n    <Tabbar></Tabbar>\n  </div>\n</template>\n\n<script>\n/* eslint-disable */\nimport Header from \"../components/Header\";\nimport Tabbar from \"../components/Tabbar\";\nimport { mapActions, mapState } from \"vuex\";\nimport BScroll from \"better-scroll\";\n\nexport default {\n  name: \"contacts\",\n  components: {\n    Header,\n    Tabbar\n  },\n  data() {\n    return {\n      current: [\"user\"],\n      openKeys: [\"sub1\"],\n      closable: false,\n      visible: false\n    };\n  },\n  computed: {\n    ...mapState([\"roster\", \"messages\", \"group\"])\n  },\n  methods: {\n    ...mapActions([\n      \"getRoster\",\n      \"agreeFriends\",\n      \"disagreeFriends\",\n      \"sendTextMeg\",\n      \"getGroup\",\n      \"getGroupInfo\",\n      \"listGroupMember\"\n    ]),\n    handleClick(e) {\n      // console.log(\"click\", e);\n      this.$store.commit(\"receive_activeUser\", e.key);\n      this.$router.push({ name: \"chatbox\", params: { username: e.key } });\n    },\n    handleClickGroup(e) {\n      this.$store.commit(\"receive_activegroup\", e.key);\n      this.$router.push({ name: \"chatgroup\", params: { groupid: e.key } });\n      this.getGroupInfo(e.key).then((name) => {\n        this.$store.state.title = name.data[0].name\n      },() => {\n        console.log('获取群组信息失败！')\n      }) //获取群组信息\n      this.listGroupMember(e.key) //获取群组成员\n    },\n    initBetterScroll() {\n      if (this.wrapperScroll) {\n        // 如果存在代表menuScroll已经初始化过一次了\n        this.wrapperScroll.refresh(); // 重新计算容器与内容的高度,无需重新实例化新对象\n      } else {\n        this.wrapperScroll = new BScroll(this.$refs.wrapper, {\n          click: true\n        }); // 该页面被注销好去清除他\n      }\n    },\n    showModal() {\n      this.visible = true;\n    },\n\n    //同意添加好友\n    handleAgree(name) {\n      // console.log('agree');\n      this.visible = false;\n      this.agreeFriends(name);\n      let opt = {\n        to: name,\n        msg: \"我们已经是好友，来一起聊天吧！\"\n      };\n      this.sendTextMeg(opt);\n    },\n    handleDisagree(name) {\n      // console.log('disagree');\n      this.disagreeFriends(name);\n    }\n    // titleClick(e) {\n    //   console.log(\"titleClick\", e);\n    // }\n  },\n  mounted() {\n    this.getRoster();\n    this.getGroup(); //获取群组\n    this.initBetterScroll();\n  },\n  beforeDestroy() {\n    this.wrapperScroll.destroy();\n    this.wrapperScroll = null;\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.contacts {\n  .wrapper {\n    height: 75vh;\n  }\n  .newFriend {\n    width: 100%;\n    line-height: 40px;\n    padding: 0 24px;\n    overflow: hidden;\n    position: relative;\n    span {\n      float: left;\n      .userAddIcon {\n        margin-right: 10px;\n      }\n      p {\n        display: inline-block;\n        font-size: 14px;\n        margin: 0;\n        color: rgba(0, 0, 0, 0.65);\n      }\n    }\n    .righticon {\n      position: absolute;\n      right: 12px;\n      top: 50%;\n      transform: translateY(-50%);\n      font-size: 5px;\n      font-weight: bolder;\n    }\n  }\n  .title {\n    float: left;\n  }\n  .ant-menu-item {\n    text-align: left;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Contacts.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Contacts.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Contacts.vue?vue&type=template&id=168785d6&scoped=true&\"\nimport script from \"./Contacts.vue?vue&type=script&lang=js&\"\nexport * from \"./Contacts.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Contacts.vue?vue&type=style&index=0&id=168785d6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"168785d6\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}